{% extends 'wafer/base.html' %}
{% load static %}

{% block page_title %}Accommodation Recommendations{% endblock %}

{% block content %}
<section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12 lg:pb-20 space-y-16">
    <p class="text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
      Johannesburg offers a wide variety of accommodation options, and we would like to highlight some choices close to the PyCon Africa 2025 venue.
      (PyCon Africa is not affiliated with any of these venues, and the listed prices are based on publicly available information.)
    </p>
	<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
		{% for acc in accommodations %}

            <div class="bg-white rounded-xl shadow-md hover:shadow-xl p-6 pt-1 border border-gray-100 hover:border-gray-200 transition-all duration-300 flex flex-col items-center text-center space-y-4">
                <p class="text-sm text-pycon-green transition-colors duration-200 bg-gray-50 hover:bg-gray-100 rounded-lg px-3 ">{{ acc.type.name }}</p>
                <div class="flex-grow space-y-3">
                    <a href="{{ acc.website }}" class="no-underline">
                        <h3 class="text-xl font-bold text-gray-900 hover:text-pycon-blue transition-colors duration-200">{{ acc.name }}</h3>
                    </a>
                    
                    <div class="space-y-1">
                        <p class="text-sm text-gray-600 hover:text-pycon-green transition-colors duration-200 bg-gray-50 hover:bg-gray-100 rounded-lg px-3 py-2">{{ acc.location }}</p>
                        <p class="text-sm text-gray-600 hover:text-pycon-blue transition-colors duration-200 bg-gray-50 hover:bg-gray-100 rounded-lg px-3">Avg. rate per night: <b>R{{ acc.approximate_rate }}</b></p>
                        <div>
                            {% if acc.phone_number %}
                                <a href="tel:{{ acc.phone_number }}" class="block no-underline" target="_blank">
                                    <p class="text-sm text-gray-600 hover:text-pycon-blue transition-colors duration-200 bg-gray-50 hover:bg-gray-100 rounded-lg px-3 ">{{ acc.phone_number }}</p>
                                </a>
                            {% endif %}
                            {% if acc.email %}
                                <a href="mailto:{{ acc.email }}" class="block no-underline" target="_blank">
                                    <p class="text-sm text-gray-600 hover:text-pycon-blue transition-colors duration-200 bg-gray-50 hover:bg-gray-100 rounded-lg px-3">{{ acc.email }}</p>
                                </a>
                            {% endif %}
                            {% if acc.website %}
                                <a href="{{ acc.website }}" class="block no-underline" target="_blank">
                                    <p class="text-sm text-gray-600 hover:text-pycon-blue transition-colors duration-200 bg-gray-50 hover:bg-gray-100 rounded-lg px-3">Website</p>
                                </a>
                            {% endif %}
                        </div>
                        <div>
                            {% if acc.shuttle_service %}
                                <span class="text-xs text-gray-600 hover:text-pycon-blue transition-colors duration-200 bg-gray-50 hover:bg-gray-100 rounded-lg pl-3 pr-1">
                                    Shuttle service:
                                    {{shuttle_choices.contact}}
                                    {% for value in shuttle_choices %}
                                        {% if value == acc.shuttle_service %}
                                            {{ label }}
                                        {% endif %}
                                    {% endfor %}
                                </span>
                            {% endif %}
                            {% if acc.breakfast_included %}
                                <span>|</span>
                                <span class="text-xs text-gray-600 hover:text-pycon-green transition-colors duration-200 bg-gray-50 hover:bg-gray-100 rounded-lg pr-3 pl-1">Breakfast included</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

		{% empty %}
			<li>No accommodation options available yet.</li>
		{% endfor %}
	</div>
</section>
{% if is_paginated %}
<section class="wafer wafer-pagination w-full flex justify-center">
    <ul class="pagination list-none flex space-x-4">
        {% if page_obj.has_previous %}
        <li class="page-item"><a class="page-link no-underline"
                href="?page={{ page_obj.previous_page_number }}">&laquo;</a></li>
        {% else %}
        <li class="page-item" class="disabled"><a class="page-link no-underline" href="#">&laquo;</a></li>
        {% endif %}
        {% for page in paginator.page_range %}
        <li class="page-item">
            {% if page == page_obj.number %}
                <span class="text-pycon-blue">{{ page }}</span>
            {% else %}
                <a class="page-link no-underline" href="?page={{ page }}">{{ page }}</a>
            {% endif %}
        </li>
        {% endfor %}
        {% if page_obj.has_next %}
        <li class="page-item">
            <a class="page-link no-underline" href="?page={{ page_obj.next_page_number }}">&raquo;</a>
        </li>
        {% else %}
        <li class="page-item" class="disabled"><a class="page-link no-underline" href="#">&raquo;</a></li>
        {% endif %}
    </ul>
</section>
{% endif %}
{% endblock %}